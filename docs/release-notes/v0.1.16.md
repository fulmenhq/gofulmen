# Gofulmen v0.1.16 - Crucible v0.2.17 Support – DevSecOps Secrets Schema Sync

**Release Date**: 2025-11-17
**Version**: 0.1.16 (SemVer)
**Focus**: Supporting Crucible v0.2.17 DevSecOps secrets schema enhancements

---

## Overview

Version 0.1.16 updates gofulmen to support Crucible v0.2.17, bringing enhanced DevSecOps secrets schema with structured credential objects, lifecycle metadata, and rotation policies. This enables fulmen-secrets v0.1.1+ enterprise credential management features.

**Key Highlights**:

- ✅ Crucible v0.2.17 dependency update with full verification
- ✅ DevSecOps secrets schema sync with structured credential objects
- ✅ Support for credential types (api_key, password, token) with smart masking
- ✅ Lifecycle metadata (created, expires, tags, owner) and rotation policies
- ✅ External reference support (vault://, aws-secrets://)
- ✅ No breaking changes - schema sync only

---

## Changes

### Crucible v0.2.17 Update

**Motivation**: Align gofulmen with latest Crucible release to enable fulmen-secrets v0.1.1+ enterprise features.

#### Dependency Update

- **go.mod**: Updated from `github.com/fulmenhq/crucible v0.2.16` to `v0.2.17`
- **Verification**: Confirmed via `go list -m github.com/fulmenhq/crucible`
- **SSOT Consumer**: Updated `.goneat/ssot-consumer.yaml` to use v0.2.17 ref
- **Provenance**: Updated `.goneat/ssot/provenance.json` with latest metadata

#### DevSecOps Secrets Schema Enhancement

**Schema Location**: `schemas/crucible-go/devsecops/secrets/v1.0.0/secrets.schema.json`

**New Credential Object Structure**:

Replaced flat string map (`{ "API_KEY": "value" }`) with structured credential objects:

```yaml
credentials:
  API_KEY:
    type: api_key
    value: sk_live_abc123def456
    description: Live Stripe API key
    metadata:
      created: "2025-01-15T10:00:00Z"
      expires: "2026-01-15T10:00:00Z"
      purpose: payment-processing
      tags: [payment, critical, pci-scope]
      owner: payments-team
    rotation:
      interval: 90d
      method: auto
```

**Credential Types & Smart Masking**:

| Type       | Use Case                    | Masking Behavior                 |
| ---------- | --------------------------- | -------------------------------- |
| `api_key`  | External service API keys   | Show prefix: `sk_live_...xyz`    |
| `token`    | Auth tokens, JWTs           | Show suffix: `...1234`           |
| `password` | Passwords, DB URLs, secrets | Full redaction: `***REDACTED***` |

**Lifecycle Metadata**:

- `created`: ISO8601 timestamp
- `expires`: Expiry timestamp for rotation alerts
- `purpose`: Purpose slug (e.g., `payment-processing`)
- `tags`: Categorization tags (e.g., `["critical", "pci"]`)
- `owner`: Owner/team identifier

**Rotation Policies**:

- `interval`: Rotation interval (e.g., `30d`, `90d`, `6m`, `1y`)
- `method`: Rotation method (`auto` or `manual`)

**External References**:

Support for secret manager integration:

```yaml
DATABASE_URL:
  type: password
  ref: vault://secrets/prod/db-url
  description: Production database URL from Vault
```

---

## Impact

### For fulmen-secrets Users

- ✅ **Rich Credential Management**: Structured objects with metadata and rotation policies
- ✅ **Smart Masking**: Type-aware redaction for debugging without exposing secrets
- ✅ **Lifecycle Tracking**: Creation timestamps, expiry monitoring, ownership tracking
- ✅ **Compliance Auditing**: Tag-based filtering for PCI, SOX, HIPAA compliance
- ✅ **External Integration**: Vault, AWS Secrets Manager, and custom URI schemes
- ✅ **Rotation Policies**: Documented rotation frequency and automation methods

### For gofulmen Consumers

- ✅ **Latest Schemas**: Access to enhanced DevSecOps standards via SSOT
- ✅ **No Breaking Changes**: Pure schema sync with backward compatibility
- ✅ **Enterprise Features**: Ready for advanced credential management workflows

---

## Files Changed

```
.goneat/ssot-consumer.yaml                              # Updated to v0.2.17 ref
.goneat/ssot/provenance.json                            # Updated provenance tracking
go.mod                                                  # Updated to Crucible v0.2.17
go.sum                                                  # Updated with v0.2.17 hashes
schemas/crucible-go/devsecops/secrets/v1.0.0/secrets.schema.json  # Enhanced schema
config/crucible-go/devsecops/secrets/v1.0.0/defaults.yaml        # Updated examples
VERSION                                                 # v0.1.16
```

**Total**: 7 files changed (+ enhanced DevSecOps schema support)

---

## Verification

- ✅ All tests passing (existing test suite maintained)
- ✅ Precommit checks: 0 issues (100% health)
- ✅ Schema validation passes for updated DevSecOps schemas
- ✅ Crucible v0.2.17 dependency verified through multiple methods
- ✅ No breaking changes - pure schema enhancement

---

## Upgrade Guide

### For Existing fulmen-secrets Users

**No Action Required**: This release only updates the underlying schemas. fulmen-secrets will handle the transition to structured credential objects in its v0.1.1+ release.

### For Schema Consumers

**If Implementing Validators**:

1. Update to recognize `credentials` field (not `secrets`)
2. Implement credential object validation (type, value XOR ref)
3. Support optional metadata and rotation fields
4. Implement smart masking based on credential type

**Example Validation**:

```go
// Validate credential has exactly one of value or ref
if (cred.Value != "" && cred.Ref != "") {
    return errors.New("credential must have value OR ref, not both")
}
if (cred.Value == "" && cred.Ref == "") {
    return errors.New("credential must have either value or ref")
}
```

---

## Related Documentation

- [Crucible v0.2.17 Release Notes](https://github.com/fulmenhq/crucible/releases/tag/v0.2.17)
- [DevSecOps Project Secrets Standard](../standards/devsecops/project-secrets.md)
- [fulmen-secrets Repository](https://github.com/fulmenhq/fulmen-secrets)

---

## Credits

**Developed by**: Foundation Forge under supervision of @3leapsdave

**Triggered by**: Crucible v0.2.17 DevSecOps secrets schema enhancements

---

**Full Changelog**: [CHANGELOG.md](../CHANGELOG.md)
**Previous Release**: [v0.1.15](v0.1.15.md)

---

<div align="center">

⚡ **Quality First. Scale Forever.** ⚡

</div>
